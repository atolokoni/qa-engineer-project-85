---
- summary: |
    Проверка регистрации пользователя с корректными данными
  requirement: |
    При вводе корректных данных пользователь должен быть зарегестрирован и войти в систему
  prerequisites:
    Открыта страница регистрации
  test-data: |
    Nickname = annaannaanna, email = anna@gmail.com, password = annaannaanna
  steps:
    - Вводим nickname
    - Вводим email
    - Вводим password в поля 'password' и 'confirm password'
    - Нажимаем 'Sign up'
  expected-result: |
    Пользователь зарегестрирован, вошел в систему и перенаправлен на главную страницу

- summary: |
    Проверка регистрации пользователя с некорректной почтой
  requirement: |
    При вводе корректных данных пользователь должен быть зарегестрирован и войти в систему
  prerequisites:
    Открыта страница регистрации
  test-data: |
    Nickname = annaannaanna, email = anna@gmail, password = annaannaanna
  steps:
    - Вводим nickname
    - Вводим email
    - Вводим password в поля 'password' и 'confirm password'
    - Нажимаем 'Sign up'
  expected-result: |
    Пользователь должен получить уведомление о неверно введенном email

- summary: |
    Проверка входа пользователя с существующими логином и паролем
  requirement: |
    При введении корректных данных пользователь должен войти в учетную запись
  prerequisites:
    Открыта страница 'Sign in'
  test-data: |
    email = anna@gmail.com, password = annaannaanna
  steps:
    - Вводим email
    - Вводим password
    - Нажимаем 'Submit'
  expected-result: |
    Пользователь авторизован, произошел редирект на главную страницу

- summary: |
    Проверка входа пользователя с неверным паролем
  requirement: |
    При неправильном пароле пользователь должен получить сообщение об ошибке
  prerequisites:
    Открыта страница логина
  test-data: |
    email = anna@gmail.com, password = annaanna
  steps:
    - Вводим email
    - Вводим password
    - Нажимаем 'Submit'
  expected-result: |
    Пользователь должен получить уведомление о неверно введенном пароле

- summary: |
    Проверка входа пользователя с несуществующим логином
  requirement: |
    При неправильном логине или пароле пользователь должен получить сообщение об ошибке
  prerequisites:
    Открыта страница логина
  test-data: |
    email = annaanna@gmail.com, password = annaannaanna
  steps:
    - Вводим email
    - Вводим password
    - Нажимаем 'Submit'
  expected-result: |
    Пользователь должен получить уведомление о неверно введенной почте

- summary: |
    Проверка навигации
  requirement: |
    Переход по страницам происходит корректно, отображается вся информация
  prerequisites:
    Открыта главная страница, пользователь авторизован
  test-data: |
    Нет данных
  steps:
    - Нажимаем на профиль в правом верхнем углу экрана
    - Нажимаем 'My profile'
    - Нажимаем 'Completed games'
    - Нажимаем на профиль в правом верхнем углу экрана
    - Нажимаем 'Settings'
    - Нажимаем на профиль в правом верхнем углу экрана
    - Нажимаем 'Users rating'
    - Нажимаем 'Weekly'
    - Нажимаем 'Monthly'
    - Нажимаем на профиль в правом верхнем углу экрана
    - Нажимаем 'Tasks'
    - Нажимаем на профиль в правом верхнем углу экрана
    - Нажимаем 'Tournaments'
    - Нажимаем 'CodeBattle from Haxlet's community'
  expected-result: |
    Переход по всем страницам произошел корректно, все данные были отображены

- summary: |
    Проверка изменения настроек посльзователя
  requirement: |
    Изменение настроек пользователя происходит корректно
  prerequisites:
    Открыта страница 'settings', пользователь авторизован
  test-data: |
    Нет данных
  steps:
    - В списке 'Your weapon' выбираем 'Java'
    - В списке 'Select sound type' выбираем 'Standart'
    - Ползунок 'Select sound level' сдвигаем влево до конца
    - Нажимаем 'Save'
    - Обновляем страницу
  expected-result: |
    Настройки, выбранные ранее, сохранены

- summary: |
    Проверка перехода по ссылкам
  requirement: |
    Редирект на другие ресурсы происходит корректно
  prerequisites:
    Открыта главная страница
  test-data: |
    Нет данных
  steps:
    - Нажимаем на профиль в правом верхнем углу экрана
    - Нажимаем 'SourceCode'
    - Возвращаемся на вкладку 'Hexlet Codebattle'
    - Нажимаем на профиль в правом верхнем углу экрана
    - Нажимаем 'Hexlet'
    - Возвращаемся на вкладку 'Hexlet Codebattle'
    - Нажимаем на профиль в правом верхнем углу экрана
    - Нажимаем 'Join Discord'
    - Возвращаемся на вкладку 'Hexlet Codebattle'
    - Нажимаем на профиль в правом верхнем углу экрана
    - Нажимаем 'tg#codebattle'
    - Возвращаемся на вкладку 'Hexlet Codebattle'
  expected-result: |
    В разных окнах открыты и корректно отображены исходный код codebattle на сайте github.com, главная страница Hexlet, приглашения присоединиться к Discord и telegram каналам

- summary: |
    Проверка сортировки пользователей в рейтинге по рангу
  requirement: |
    Сортировка по рангу происходит корректно
  prerequisites:
    Открыта страница 'Users rating'
  test-data: |
    Нет данных
  steps:
    - Нажимаем 'rank'
    - Нажимаем 'rank'
  expected-result: |
    Пользователи отображены по убыванию параметра 'rank'

- summary: |
    Проверка поиска пользователей в рейтинге
  requirement: |
    Поиск происходит корректно
  prerequisites:
    Открыта страница 'Users rating'
  test-data: |
    Username = nteir
  steps:
    - Вводим в поле поиска username
  expected-result: |
    Отображены пользователи, чей username имеет в составе 'nteir'

- summary: |
    Проверка сортировки пользователей в рейтинге по рейтингу
  requirement: |
    Сортировка по рейтингу происходит корректно
  prerequisites:
    Открыта страница 'Users rating'
  test-data: |
    Нет данных
  steps:
    - Нажимаем 'rating'
    - Нажимаем 'rating'
  expected-result: |
    Пользователи отображены по возрастанию параметра 'rating'

- summary: |
   Проверка сортировки пользователей в рейтинге по количеству игр
  requirement: |
    Сортировка по количеству игр происходит корректно
  prerequisites:
    Открыта страница 'Users rating'
  test-data: |
    Нет данных
  steps:
    - Нажимаем 'Games played'
    - Нажимаем 'Games played'
  expected-result: |
    Пользователи отображены по возрастанию параметра 'Games played'

- summary: |
   Проверка сортировки пользователей в рейтинге по дате регистрации
  requirement: |
    Сортировка по дате регистрации происходит корректно
  prerequisites:
    Открыта страница 'Users rating'
  test-data: |
    Нет данных
  steps:
    - Нажимаем 'Joined'
    - Нажимаем 'Joined'
  expected-result: |
    Пользователи отображены по убыванию параметра 'Games played'

- summary: |
    Проверка изменения количества отображаемых в рейтинге пользователей
  requirement: |
    Количество отображаемых пользователей изменяется
  prerequisites:
    Открыта страница 'Users rating'
  test-data: |
    Нет данных
  steps:
    - В поле 'Users per page выбираем 50
  expected-result: |
    На странице отображены 50 пользователей

- summary: |
    Проверка добавления ботов в список отображаемых пользователей в рейтинге
  requirement: |
    В списке отображаются как пользователи, так и боты
  prerequisites:
    Открыта страница 'Users rating'
  test-data: |
    Нет данных
  steps:
    - Нажимаем 'Games played'
    - Отмечаем 'With bots'
  expected-result: |
    В списке пользователей появились боты, показатель 'Total entries' возрос

- summary: |
    Проверка редиректа на страницу пользователя в рейтинге
  requirement: |
    Происходит редирект на страницу пользователя
  prerequisites:
    Открыта страница 'Users rating'
  test-data: |
    Username = nteir
  steps:
    - Вводим в поле поиска username
    - Нажимаем на никнейм nteir
  expected-result: |
    Произошел редирект на страницу пользователя

- summary: |
    Проверка редиректа на github пользователя в рейтинге
  requirement: |
    Происходит редирект на github пользователя
  prerequisites:
    Открыта страница 'Users rating'
  test-data: |
    Username = nteir
  steps:
    - Вводим в поле поиска username
    - Нажимаем на значок github у пользователя nteir
  expected-result: |
    Произошел редирект на страницу пользователя nteir на github

- summary: |
    Проверка работоспособности привязки аккаунта github и discord
  requirement: |
    Происходит редирект на github и discord для привязки аккаунта
  prerequisites:
    Открыта страница 'settings', пользователь авторизован
  test-data: |
    Нет данных
  steps:
    - Нажимаем 'Link GitHub'
    - Возвращаемся на вкладку 'Hexlet codebattle'
    - Нажимаем 'Link Discord'
  expected-result: |
    Произошел редирект на GitHub и Discord для привязки аккаунта

- summary: |
    Проверка просмотра заданий
  requirement: |
    Просмотр Task доступен и корректно отображается
  prerequisites:
    Открыта страница 'tasks', пользователь авторизован
  test-data: |
    Нет данных
  steps:
    - У Task с названием 'base_n' нажимаем 'Show'
    - Нажимаем 'Status'
  expected-result: |
    Задание 'base_n' отображается корректно

- summary: |
    Создание нового соревнования
  requirement: |
    Создание соревнования происходит корректно
  prerequisites:
    Открыта страница 'tournaments', пользователь авторизован
  test-data: |
    Name = 'My newest fancy tournament'
  steps:
    - Вводим Name
    - Нажимаем ''
  expected-result: |
    Соревнование создано, произошел редирект на страницу соревнования

- summary: |
    Редактирование соревнования
  requirement: |
    Редактирование еще не оконченного соревнования происходит корректно
  prerequisites:
    Пользователь авторизован, соревнование создано, еще не начато, открыта страница данного соревнования
  test-data: |
    Нет данных
  steps:
    - Нажимаем 'Edit' 
    - Выбираем 'player limit' 2
    - Нажимаем 'Update'
  expected-result: |
    Максимальное количество участников изменено

- summary: |
    Отправление сообщений в чат соревнования
  requirement: |
    Сообщения отправляются и видны пользователям
  prerequisites:
    Пользователь авторизован, открыта страница соревнования
  test-data: |
    Нет данных
  steps:
    - В поле 'Write your message here' вводим 'Hi'
    - Нажимаем 'Send'
    - В поле 'Write your message here' вводим 'Bye'
    - Нажимаем 'Send'
  expected-result: |
    Сообщения были отправлены, отображены в общем чате

- summary: |
    Проверка бана пользователей за некорректные сообщения в чате соревнования
  requirement: |
    Создатель соревнования может забанить и разбанить пользователей
  prerequisites:
    Пользователь авторизован, открыта страница его соревнования
  test-data: |
    Нет данных
  steps:
    - В поле 'Write your message here' вводим 'Hi'
    - Нажимаем 'Send'
    - Нажимаем 'ban' рядом с отправленным сообщением
    - В поле 'Write your message here' вводим 'Sorry'
    - Нажимаем 'Clean banned'
    - В поле 'Write your message here' вводим 'Thanks'
  expected-result: |
    Сообщения 'Hi' и 'Sorry' не отображены, в чате отображается только 'Thanks' и информация о том, что пользователь был заблокирован

- summary: |
    Проверка присоединения к соревнованию
  requirement: |
    Пользователь может присоедениться к соревнованию
  prerequisites:
    Пользователь авторизован, открыта страница соревнования
  test-data: |
    Нет данных
  steps:
    - Нажимаем 'Join'
  expected-result: |
    Пользователь присоединился к соревнованию

- summary: |
    Проверка выхода из соревнования
  requirement: |
    Пользователь может покинуть соревнование
  prerequisites:
    Пользователь авторизован, открыта страница соревнования, пользователь в списке участников
  test-data: |
    Нет данных
  steps:
    - Нажимаем 'Leave'
  expected-result: |
    Пользователь вышел из соревнования и не числится в списке участников

- summary: |
    Проверка перезапуска соревнования
  requirement: |
    Соревнование можно перезапустить
  prerequisites:
    Пользователь авторизован, открыта страница его соревнования, соревнование началось
  test-data: |
    Нет данных
  steps:
    - Нажимаем 'Back to tournament'
    - Нажимаем 'Restart'
  expected-result: |
    Прогресс соревнования сброшен, список участников пуст

- summary: |
    Проверка удаления соревнования
  requirement: |
    Не оконченное соревнование можно отменить
  prerequisites:
    Пользователь авторизован, открыта страница его соревнования
  test-data: |
    Нет данных
  steps:
    - Нажимаем 'Cancel'
  expected-result: |
    Соревнование отменено, произошел редирект на страницу 'tournaments'

- summary: |
    Проверка бана участника соревнования
  requirement: |
    Участника соревнования можно забанить создателю
  prerequisites:
    Пользователь авторизован, открыта страница его соревнования
  test-data: |
    Нет данных
  steps:
    - Нажимаем 'Join'
    - Нажимаем 'Kick' рядом со своим никнеймом
  expected-result: |
    Пользователь удален из списка участников

- summary: |
    Проверка создания игры
  requirement: |
    Авторизованный пользователь может создать игру
  prerequisites:
    Пользователь авторизован, открыта главная страница
  test-data: |
    Нет данных
  steps:
    - Нажимаем 'Create a game'
    - Выбираем 'Game type' 'With a bot'
    - В поле 'Choose task by name or tags' выбираем 'rect_area'
    - Нажимаем 'create battle'
  expected-result: |
    Игра создана и запущена

- summary: |
    Проверка прохождения игры
  requirement: |
    Пользователь может завершить игру, предложив свое решение
  prerequisites:
    Пользователь авторизован, запущена игра 'rect_area' с ботом
  test-data: |
    solution = {const _ = require("lodash");
const R = require("rambda");

const solution = (width, length) => {
  return width * length;
};

module.exports = solution;}
  steps:
    - В поле для решения вводим solution
    - Нажимаем 'Check solution'
  expected-result: |
    Игра завершена, пользователь получает сообщение о победе
